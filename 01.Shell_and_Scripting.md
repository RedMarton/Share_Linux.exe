# 01.Shell_and_Scripting.md
Shell（シェル）と Script（スクリプト）の理解チートシート  
Bash / Python Shell / CLI 思想（コピー対応版）

---

## Shell の本質
Shell は「OS と人間をつなぐ通訳」。  
役割は 3 つ。

1. コマンドを受け取る（例：ls、cd、python）  
2. OS に「実行して」と依頼する  
3. 結果を人間に返す（標準出力）

Shell = OS のフロントエンド。

---

## Shell の種類
- Bash（Linux 標準）  
- Zsh（macOS 標準）  
- Fish（補完が強い）  
- PowerShell（Windows、オブジェクト操作）  

Python Shell は「python と入力した後の対話環境」であり、  
OS の Shell とは役割が別。

---

## Script の本質
Script = 「Shell に渡す指示書（レシピ）」。

Bash script（.sh）は Bash が読む。  
Python script（.py）は Python が読む。

Script そのものは“動かない”。  
動かすのは Shell（またはインタプリタ）。

---

## Shebang（シバン）
Script の先頭に書く1行。

例：  
#!/bin/bash  
#!/usr/bin/env python3  
#!/bin/sh  

意味：  
「この script はこの実行環境で読んでくれ」

Script の正体を決める行。

---

## Script と Program の違い
Script  
→ 手順書・順次実行・OS 自動化向け

Program  
→ 複雑なロジック・コンパイル・構造的

Python は Script と Program の中間領域を担う。

---

## Shell Script（Bash）の役割
- ファイル操作（mkdir、rm、mv）  
- 条件分岐  
- ループ処理  
- プロセス制御  
- バッチ処理（cron）  
- 人の作業手順を自動化  

OS 操作に最適化された“自動化の言語”。

---

## Bash Script の基本構造（コマンドをそのまま記載）
変数：
NAME="Marton"  
echo $NAME  

条件分岐：
if [ -f file.txt ]; then  
  echo "exists"  
fi  

ループ：
for i in 1 2 3; do  
  echo $i  
done  

関数：
hello() {  
  echo "Hello"  
}  
hello  

終了コード（exit code）  
0 = 成功  
0 以外 = エラー  

---

## Python Script と Shell Script の違い
Python script  
→ データ処理・ロジック処理・API統合が得意  
→ 大規模処理向け

Shell script  
→ OS を操作することが得意  
→ ファイル、プロセス、環境制御が得意

---

## Python Shell（REPL）の理解
python3 と打って入る対話モード（>>>）は  
Python の実験室。

- OS を操作するものではない  
- Python コードを即座に試す場所  
- Script を書く前の“確認環境”

---

## 強い Script を書くための鉄則
1. 「誰が実行者か」を理解する  
script.sh → Bash  
script.py → Python  
terraform → terraform engine  

2. エラー時に止める（Bash）  
set -e  
set -u  
set -o pipefail  

3. 冪等性（同じ実行を繰り返しても壊れない）  
mkdir -p directory_name  
if [ ! -f file ]; then ...  

4. ログを残す  
echo が最強  

5. Script は“短く・明確に”  

---

## よくある誤解と真実
誤解：Script が OS を操作している  
真実：OS を操作するのは Shell、Scriptは指示書

誤解：Python Shell は OS Shell  
真実：全く別物。Python の対話環境。

誤解：Script ＝ Program  
真実：Script は“連続した命令”、Program は“構造化されたシステム”。

---

## 設計原則（暗記）
- Shell = OS の通訳  
- Script = 通訳に渡す指示書  
- Shebang = その Script の実行者  
- Bash = OS 自動化に最強  
- Python = データ処理に最強  
- exit code の扱いが質を決める  

---

## 記憶フック
- Shell = 「OS の口」  
- Script = 「口に渡すレシピ」  
- Python Shell = 「実験室」  
- Shebang = 「主演俳優：誰が読むのか」  

---

